<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Gator is a simple RSS feed reader" />
    <title>Posts - Gator</title>
    <script src="https://unpkg.com/htmx.org/dist/htmx.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              dark: {
                DEFAULT: '#1a1a1a',
                lighter: '#2d2d2d',
                darker: '#0f0f0f',
              }
            }
          }
        }
      }
    </script>
  </head>
  <body class="bg-dark text-gray-100 min-h-screen">
    <main class="container mx-auto px-4 py-8 max-w-4xl">
        <h1 class="text-3xl font-bold mb-8">
          <a href="/" class="text-blue-400 hover:text-blue-300 transition-colors">Gator</a>
        </h1>
        
        {{ template "tabs" . }}

        <h2 class="text-2xl font-semibold mb-6">Posts</h2>

        {{ template "posts-refresh" . }}

        {{ template "posts-search" . }}

        {{ template "posts-list" . }}
    </main>

    <script type="text/javascript">
      document.addEventListener("DOMContentLoaded", (event) => {
        document.body.addEventListener("htmx:beforeSwap", function (evt) {
          if (evt.detail.xhr.status === 422) {
            console.log("setting status to paint");
            // allow 422 responses to swap as we are using this as a signal that
            // a form was submitted with bad data and want to rerender with the
            // errors
            //
            // set isError to false to avoid error logging in console
            evt.detail.shouldSwap = true;
            evt.detail.isError = false;
          }
        });
      });
    </script>
  </body>
</html>

